<%# Χρησιμοποιούμε τη μεταβλητή mine που περνάει από τον controller ή το loop %>
<% is_mine = local_assigns[:mine] %>

<div class="d-flex <%= is_mine ? 'justify-content-end' : 'justify-content-start' %> mb-3" id="<%= dom_id message %>">
  <div class="p-3 shadow-sm" style="max-width: 85%; border-radius: 20px; <%= is_mine ? 'background-color: #0d6efd; color: white; border-bottom-right-radius: 4px;' : 'background-color: #ffffff; color: #212529; border-bottom-left-radius: 4px;' %>">
    
    <div class="small fw-bold mb-1" style="opacity: 0.8; font-size: 0.75rem;">
      <%= is_mine ? "Εσείς" : (message.user&.name.presence || message.user&.email) %>
    </div>
    
    <div style="word-wrap: break-word; font-size: 1rem;">
      <%= message.body %>
    </div>
    
    <div class="text-end mt-1" style="font-size: 0.65rem; opacity: 0.7;">
      <%= message.created_at&.strftime("%H:%M") %>
    </div>
  </div>
</div>